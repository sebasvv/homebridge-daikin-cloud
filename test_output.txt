
> @sebasvv/homebridge-daikin-cloud@2.9.0 test
> jest test/daikinAirConditioningAccessory.test.ts

  console.log
    [1/2/2026, 2:53:52 PM] --- Daikin info for debugging reasons (enable Debug Mode for more logs) ---

      at Logger.log (node_modules/homebridge/src/logger.ts:189:5)

  console.error
    [1/2/2026, 2:53:52 PM] Invalid configuration: [{"_errors":[],"callbackServerPort":{"_errors":["Invalid input: expected number, received NaN"]}}]

      22 |
      23 |     error(message: string, ...parameters: unknown[]): void {
    > 24 |         this.logger.error(this.formatMessage(message, ...parameters));
         |                     ^
      25 |     }
      26 |
      27 |     debug(message: string, ...parameters: unknown[]): void {

      at Logger.log (node_modules/homebridge/src/logger.ts:189:5)
      at Logger.error (node_modules/homebridge/src/logger.ts:148:10)
      at DaikinLogger.error (src/services/logger.ts:24:21)
      at new DaikinCloudPlatform (src/platform.ts:64:31)
      at test/daikinAirConditioningAccessory.test.ts:155:44
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at test/daikinAirConditioningAccessory.test.ts:156:12

  console.log
    [1/2/2026, 2:53:52 PM] --- Daikin info for debugging reasons (enable Debug Mode for more logs) ---

      at Logger.log (node_modules/homebridge/src/logger.ts:189:5)

  console.error
    [1/2/2026, 2:53:52 PM] Invalid configuration: [{"_errors":[],"callbackServerPort":{"_errors":["Invalid input: expected number, received NaN"]}}]

      22 |
      23 |     error(message: string, ...parameters: unknown[]): void {
    > 24 |         this.logger.error(this.formatMessage(message, ...parameters));
         |                     ^
      25 |     }
      26 |
      27 |     debug(message: string, ...parameters: unknown[]): void {

      at Logger.log (node_modules/homebridge/src/logger.ts:189:5)
      at Logger.error (node_modules/homebridge/src/logger.ts:148:10)
      at DaikinLogger.error (src/services/logger.ts:24:21)
      at new DaikinCloudPlatform (src/platform.ts:64:31)
      at test/daikinAirConditioningAccessory.test.ts:155:44
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at test/daikinAirConditioningAccessory.test.ts:156:12

  console.log
    [1/2/2026, 2:53:52 PM] --- Daikin info for debugging reasons (enable Debug Mode for more logs) ---

      at Logger.log (node_modules/homebridge/src/logger.ts:189:5)

  console.error
    [1/2/2026, 2:53:52 PM] Invalid configuration: [{"_errors":[],"callbackServerPort":{"_errors":["Invalid input: expected number, received NaN"]}}]

      22 |
      23 |     error(message: string, ...parameters: unknown[]): void {
    > 24 |         this.logger.error(this.formatMessage(message, ...parameters));
         |                     ^
      25 |     }
      26 |
      27 |     debug(message: string, ...parameters: unknown[]): void {

      at Logger.log (node_modules/homebridge/src/logger.ts:189:5)
      at Logger.error (node_modules/homebridge/src/logger.ts:148:10)
      at DaikinLogger.error (src/services/logger.ts:24:21)
      at new DaikinCloudPlatform (src/platform.ts:64:31)
      at test/daikinAirConditioningAccessory.test.ts:155:44
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at test/daikinAirConditioningAccessory.test.ts:156:12

  console.log
    [1/2/2026, 2:53:52 PM] --- Daikin info for debugging reasons (enable Debug Mode for more logs) ---

      at Logger.log (node_modules/homebridge/src/logger.ts:189:5)

  console.error
    [1/2/2026, 2:53:52 PM] Invalid configuration: [{"_errors":[],"callbackServerPort":{"_errors":["Invalid input: expected number, received NaN"]}}]

      22 |
      23 |     error(message: string, ...parameters: unknown[]): void {
    > 24 |         this.logger.error(this.formatMessage(message, ...parameters));
         |                     ^
      25 |     }
      26 |
      27 |     debug(message: string, ...parameters: unknown[]): void {

      at Logger.log (node_modules/homebridge/src/logger.ts:189:5)
      at Logger.error (node_modules/homebridge/src/logger.ts:148:10)
      at DaikinLogger.error (src/services/logger.ts:24:21)
      at new DaikinCloudPlatform (src/platform.ts:64:31)
      at test/daikinAirConditioningAccessory.test.ts:155:44
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at test/daikinAirConditioningAccessory.test.ts:156:12

  console.log
    [1/2/2026, 2:53:52 PM] --- Daikin info for debugging reasons (enable Debug Mode for more logs) ---

      at Logger.log (node_modules/homebridge/src/logger.ts:189:5)

  console.error
    [1/2/2026, 2:53:52 PM] Invalid configuration: [{"_errors":[],"callbackServerPort":{"_errors":["Invalid input: expected number, received NaN"]}}]

      22 |
      23 |     error(message: string, ...parameters: unknown[]): void {
    > 24 |         this.logger.error(this.formatMessage(message, ...parameters));
         |                     ^
      25 |     }
      26 |
      27 |     debug(message: string, ...parameters: unknown[]): void {

      at Logger.log (node_modules/homebridge/src/logger.ts:189:5)
      at Logger.error (node_modules/homebridge/src/logger.ts:148:10)
      at DaikinLogger.error (src/services/logger.ts:24:21)
      at new DaikinCloudPlatform (src/platform.ts:64:31)
      at test/daikinAirConditioningAccessory.test.ts:155:44
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at test/daikinAirConditioningAccessory.test.ts:156:12

  console.log
    [1/2/2026, 2:53:52 PM] --- Daikin info for debugging reasons (enable Debug Mode for more logs) ---

      at Logger.log (node_modules/homebridge/src/logger.ts:189:5)

  console.error
    [1/2/2026, 2:53:52 PM] Invalid configuration: [{"_errors":[],"callbackServerPort":{"_errors":["Invalid input: expected number, received NaN"]}}]

      22 |
      23 |     error(message: string, ...parameters: unknown[]): void {
    > 24 |         this.logger.error(this.formatMessage(message, ...parameters));
         |                     ^
      25 |     }
      26 |
      27 |     debug(message: string, ...parameters: unknown[]): void {

      at Logger.log (node_modules/homebridge/src/logger.ts:189:5)
      at Logger.error (node_modules/homebridge/src/logger.ts:148:10)
      at DaikinLogger.error (src/services/logger.ts:24:21)
      at new DaikinCloudPlatform (src/platform.ts:64:31)
      at test/daikinAirConditioningAccessory.test.ts:277:40

  console.log
    [1/2/2026, 2:53:52 PM] --- Daikin info for debugging reasons (enable Debug Mode for more logs) ---

      at Logger.log (node_modules/homebridge/src/logger.ts:189:5)

  console.error
    [1/2/2026, 2:53:52 PM] Invalid configuration: [{"_errors":[],"callbackServerPort":{"_errors":["Invalid input: expected number, received NaN"]}}]

      22 |
      23 |     error(message: string, ...parameters: unknown[]): void {
    > 24 |         this.logger.error(this.formatMessage(message, ...parameters));
         |                     ^
      25 |     }
      26 |
      27 |     debug(message: string, ...parameters: unknown[]): void {

      at Logger.log (node_modules/homebridge/src/logger.ts:189:5)
      at Logger.error (node_modules/homebridge/src/logger.ts:148:10)
      at DaikinLogger.error (src/services/logger.ts:24:21)
      at new DaikinCloudPlatform (src/platform.ts:64:31)
      at test/daikinAirConditioningAccessory.test.ts:277:40

  console.log
    [1/2/2026, 2:53:52 PM] --- Daikin info for debugging reasons (enable Debug Mode for more logs) ---

      at Logger.log (node_modules/homebridge/src/logger.ts:189:5)

  console.error
    [1/2/2026, 2:53:52 PM] Invalid configuration: [{"_errors":[],"callbackServerPort":{"_errors":["Invalid input: expected number, received NaN"]}}]

      22 |
      23 |     error(message: string, ...parameters: unknown[]): void {
    > 24 |         this.logger.error(this.formatMessage(message, ...parameters));
         |                     ^
      25 |     }
      26 |
      27 |     debug(message: string, ...parameters: unknown[]): void {

      at Logger.log (node_modules/homebridge/src/logger.ts:189:5)
      at Logger.error (node_modules/homebridge/src/logger.ts:148:10)
      at DaikinLogger.error (src/services/logger.ts:24:21)
      at new DaikinCloudPlatform (src/platform.ts:64:31)
      at Object.<anonymous> (test/daikinAirConditioningAccessory.test.ts:302:68)

  console.log
    [1/2/2026, 2:53:52 PM] --- Daikin info for debugging reasons (enable Debug Mode for more logs) ---

      at Logger.log (node_modules/homebridge/src/logger.ts:189:5)

  console.error
    [1/2/2026, 2:53:52 PM] Invalid configuration: [{"_errors":[],"callbackServerPort":{"_errors":["Invalid input: expected number, received NaN"]}}]

      22 |
      23 |     error(message: string, ...parameters: unknown[]): void {
    > 24 |         this.logger.error(this.formatMessage(message, ...parameters));
         |                     ^
      25 |     }
      26 |
      27 |     debug(message: string, ...parameters: unknown[]): void {

      at Logger.log (node_modules/homebridge/src/logger.ts:189:5)
      at Logger.error (node_modules/homebridge/src/logger.ts:148:10)
      at DaikinLogger.error (src/services/logger.ts:24:21)
      at new DaikinCloudPlatform (src/platform.ts:64:31)
      at Object.<anonymous> (test/daikinAirConditioningAccessory.test.ts:335:68)

FAIL test/daikinAirConditioningAccessory.test.ts
  ✕ Create DaikinCloudAirConditioningAccessory with dx4 device (23 ms)
  ✕ Create DaikinCloudAirConditioningAccessory with dx23 device (2 ms)
  ✕ Create DaikinCloudAirConditioningAccessory with dx23-2 device (1 ms)
  ✕ Create DaikinCloudAirConditioningAccessory with unknown device (2 ms)
  ✕ Create DaikinCloudAirConditioningAccessory with unknown2 device (2 ms)
  ✕ Create DaikinCloudAirConditioningAccessory with dx4 device, showExtraFeatures disabled (1 ms)
  ✕ Create DaikinCloudAirConditioningAccessory with dx23 device, showExtraFeatures disabled (1 ms)
  ✕ DaikinCloudAirConditioningAccessory Getters (1 ms)
  ✕ DaikinCloudAirConditioningAccessory Setters (1 ms)

  ● Create DaikinCloudAirConditioningAccessory with dx4 device

    expect(received).not.toThrow()

    Error name:    "Error"
    Error message: "Invalid Validation Configuration: {\"_errors\":[],\"callbackServerPort\":{\"_errors\":[\"Invalid input: expected number, received NaN\"]}}"

      at new DaikinCloudPlatform (src/platform.ts:2631:13)
      at test/daikinAirConditioningAccessory.test.ts:132:77
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at test/daikinAirConditioningAccessory.test.ts:133:12
      at test/daikinAirConditioningAccessory.test.ts:133:12

  ● Create DaikinCloudAirConditioningAccessory with dx23 device

    expect(received).not.toThrow()

    Error name:    "Error"
    Error message: "Invalid Validation Configuration: {\"_errors\":[],\"callbackServerPort\":{\"_errors\":[\"Invalid input: expected number, received NaN\"]}}"

      at new DaikinCloudPlatform (src/platform.ts:2631:13)
      at test/daikinAirConditioningAccessory.test.ts:132:77
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at test/daikinAirConditioningAccessory.test.ts:133:12
      at test/daikinAirConditioningAccessory.test.ts:133:12

  ● Create DaikinCloudAirConditioningAccessory with dx23-2 device

    expect(received).not.toThrow()

    Error name:    "Error"
    Error message: "Invalid Validation Configuration: {\"_errors\":[],\"callbackServerPort\":{\"_errors\":[\"Invalid input: expected number, received NaN\"]}}"

      at new DaikinCloudPlatform (src/platform.ts:2631:13)
      at test/daikinAirConditioningAccessory.test.ts:132:77
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at test/daikinAirConditioningAccessory.test.ts:133:12
      at test/daikinAirConditioningAccessory.test.ts:133:12

  ● Create DaikinCloudAirConditioningAccessory with unknown device

    expect(received).not.toThrow()

    Error name:    "Error"
    Error message: "Invalid Validation Configuration: {\"_errors\":[],\"callbackServerPort\":{\"_errors\":[\"Invalid input: expected number, received NaN\"]}}"

      at new DaikinCloudPlatform (src/platform.ts:2631:13)
      at test/daikinAirConditioningAccessory.test.ts:132:77
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at test/daikinAirConditioningAccessory.test.ts:133:12
      at test/daikinAirConditioningAccessory.test.ts:133:12

  ● Create DaikinCloudAirConditioningAccessory with unknown2 device

    expect(received).not.toThrow()

    Error name:    "Error"
    Error message: "Invalid Validation Configuration: {\"_errors\":[],\"callbackServerPort\":{\"_errors\":[\"Invalid input: expected number, received NaN\"]}}"

      at new DaikinCloudPlatform (src/platform.ts:2631:13)
      at test/daikinAirConditioningAccessory.test.ts:132:77
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at test/daikinAirConditioningAccessory.test.ts:133:12
      at test/daikinAirConditioningAccessory.test.ts:133:12

  ● Create DaikinCloudAirConditioningAccessory with dx4 device, showExtraFeatures disabled

    Invalid Validation Configuration: {"_errors":[],"callbackServerPort":{"_errors":["Invalid input: expected number, received NaN"]}}



      at new DaikinCloudPlatform (src/platform.ts:2631:13)
      at test/daikinAirConditioningAccessory.test.ts:231:73

  ● Create DaikinCloudAirConditioningAccessory with dx23 device, showExtraFeatures disabled

    Invalid Validation Configuration: {"_errors":[],"callbackServerPort":{"_errors":["Invalid input: expected number, received NaN"]}}



      at new DaikinCloudPlatform (src/platform.ts:2631:13)
      at test/daikinAirConditioningAccessory.test.ts:231:73

  ● DaikinCloudAirConditioningAccessory Getters

    Invalid Validation Configuration: {"_errors":[],"callbackServerPort":{"_errors":["Invalid input: expected number, received NaN"]}}



      at new DaikinCloudPlatform (src/platform.ts:2631:13)
      at Object.<anonymous> (test/daikinAirConditioningAccessory.test.ts:248:101)

  ● DaikinCloudAirConditioningAccessory Setters

    Invalid Validation Configuration: {"_errors":[],"callbackServerPort":{"_errors":["Invalid input: expected number, received NaN"]}}



      at new DaikinCloudPlatform (src/platform.ts:2631:13)
      at Object.<anonymous> (test/daikinAirConditioningAccessory.test.ts:274:101)

------------------------------------|---------|----------|---------|---------|-------------------
File                                | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------------------------------|---------|----------|---------|---------|-------------------
All files                           |   15.49 |    10.71 |      12 |    15.7 |                   
 src                                |   22.95 |     3.44 |    4.16 |   23.33 |                   
  config.ts                         |     100 |      100 |     100 |     100 |                   
  index.ts                          |       0 |      100 |       0 |       0 | 3-10              
  platform.ts                       |   21.05 |     3.44 |    4.34 |   21.42 | 71-295            
  settings.ts                       |     100 |      100 |     100 |     100 |                   
 src/accessories                    |   19.56 |        0 |       0 |   19.56 |                   
  daikinAccessory.ts                |    8.33 |        0 |       0 |    8.33 | 10-85             
  daikinAirConditioningAccessory.ts |    37.5 |        0 |       0 |    37.5 | 10-17             
  daikinAlthermaAccessory.ts        |   28.57 |        0 |       0 |   28.57 | 13-33             
 src/repositories                   |    4.76 |        0 |       0 |    7.14 |                   
  daikinCloudRepo.ts                |    4.76 |        0 |       0 |    7.14 | 39-66             
 src/services                       |   13.81 |    12.71 |   15.04 |   13.81 |                   
  baseService.ts                    |   82.35 |    81.48 |   68.75 |   82.35 | 7-39              
  climateControlHandlers.ts         |     1.5 |        0 |       0 |     1.5 | 19-353            
  climateControlHelper.ts           |    9.72 |     7.14 |    5.26 |    9.72 | 19-179            
  climateControlService.ts          |    3.05 |        0 |       0 |    3.05 | 8-482             
  hotWaterTankService.ts            |    2.32 |        0 |       0 |    2.32 | 6-255             
  logger.ts                         |   83.33 |    71.42 |   83.33 |   83.33 | 20,29             
 src/utils                          |      10 |        0 |       0 |      10 |                   
  strings.ts                        |      10 |        0 |       0 |      10 | 3-20              
------------------------------------|---------|----------|---------|---------|-------------------
Jest: "global" coverage threshold for statements (80%) not met: 15.49%
Jest: "global" coverage threshold for branches (71%) not met: 10.71%
Jest: "global" coverage threshold for lines (80%) not met: 15.7%
Jest: "global" coverage threshold for functions (80%) not met: 12%
Test Suites: 1 failed, 1 total
Tests:       9 failed, 9 total
Snapshots:   0 total
Time:        1.26 s
Ran all test suites matching /test\/daikinAirConditioningAccessory.test.ts/i.
